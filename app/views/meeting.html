<div class="ad-page">

    <div ng-if="!isMobile" class="ad-page-header">
        <div class="container col-xs-12 ad-app-bg">
            <div class="row">
                <!-- UPPER HEADER START  -->
                <div ng-if="menuClosed()" class="col-xs-1">
                    <i class="glyphicon glyphicon-menu-hamburger left" aria-hidden="true" ng-click="openMenu()"></i>
                </div>
                <div class="col-md-1 ad-btn-group-left ad-upper-bg ng-class:[{'col-sm-1':menuClosed(), 'col-sm-2':!menuClosed()}]">
                    <button type="button" class="btn btn-info ad-header-button" ng-click="ctrl.upperClicked()">
                        <i class="glyphicon center ng-class:[{'glyphicon-plus': !ctrl.isUpperMode(), 'glyphicon-minus': ctrl.isUpperMode()}]"></i>
                    </button>
                </div>
                <div class="col-xs-2 col-lg-2 ad-btn-group-right ad-upper-bg ng-class:[{'col-md-1':menuClosed(), 'col-md-2':!menuClosed()}]">
                    <button type="button" class="btn btn-primary ad-dummy-header-button disabled" translate translate-cloak>STR_TOPIC</button>
                </div>
                <!-- UPPER HEADER END  -->

                <!-- LOWER HEADER START  -->
                <div class="col-md-1 ad-btn-group-right ad-lower-bg right ng-class:[{'col-sm-1':menuClosed(), 'col-sm-2':!menuClosed()}]">
                    <button type="button" class="btn btn-info ad-header-button" ng-click="ctrl.lowerClicked()">
                        <i class="glyphicon center ng-class:[{'glyphicon-plus': !ctrl.isLowerMode(), 'glyphicon-minus': ctrl.isLowerMode()}]"></i>
                    </button>
                </div>
                <div class="col-xs-2 ad-btn-group-middle ad-lower-bg right">
                    <button type="button" class="btn btn-primary ad-header-button ng-class:[{'active': ctrl.isProposalsActive()}]" ng-click="ctrl.proposalsClicked()"
                    translate translate-cloak>STR_PROPOSALS</button>
                </div>
                <div class="col-xs-2 ad-btn-group-middle ad-lower-bg right" uib-dropdown is-open="">
                    <button id="materialButton" type="button" class="btn btn-primary ad-header-button ng-class:[{'active': ctrl.isMaterialsActive()}]"
                    uib-dropdown-toggle translate translate-cloak>STR_OTHER_MATERIAL<span class="caret hidden-sm"></span>
                    </button>
                    <ul uib-dropdown-menu role="menu" aria-labelledby="materialButton">
                        <div class="ad-dropdown-header" translate translate-cloak>STR_ADDITIONAL_MATERIAL</div>
                        <li class="divider"></li>
                        <li class="ng-class:[{'disabled': ctrl.isSecret(material)}]" role="menuitem" ng-repeat="material in ctrl.additionalMaterialData.objects track by $index"
                        ng-click="ctrl.additionalMaterialClicked(material)">
                            <a class="ad-dropdown-content">{{material.title}}</a>
                        </li>
                        <li class="divider"></li>
                        <div class="ad-dropdown-header" translate translate-cloak>STR_DECISION_HISTORY</div>
                        <li class="divider"></li>
                        <li class="ng-class:[{'disabled': ctrl.isSecret(decision)}]" role="menuitem" ng-repeat="decision in ctrl.decisionData.objects track by $index"
                        ng-click="ctrl.decisionClicked(decision)">
                            <a>{{decision.title}}</a>
                        </li>
                    </ul>
                </div>
                <div class="col-xs-2 ad-btn-group-left ad-lower-bg right" uib-dropdown is-open="">
                    <button id="attachmentButton" type="button" class="btn btn-primary ad-header-button ng-class:[{'active': ctrl.isAttachmentsActive()}]"
                    uib-dropdown-toggle translate translate-cloak>STR_ATTACHMENTS<span class="caret hidden-sm"></span>
                    </button>
                    <ul uib-dropdown-menu role="menu" aria-labelledby="attachmentButton">
                        <li class="ng-class:[{'disabled': ctrl.isSecret(attachment)}]" role="menuitem" ng-repeat="attachment in ctrl.attachmentData.objects track by $index"
                        ng-click="ctrl.attachmentClicked(attachment)">
                            <a>{{attachment.title}}</a>
                        </li>
                    </ul>
                </div>
                <!-- LOWER HEADER END  -->
            </div>
        </div>
    </div>

    <div ng-if="isMobile" class="db-new-page-header">
        <div class="container col-xs-12">
            <div class="row">
                <i class="col-xs-2 glyphicon glyphicon-menu-left" aria-hidden="true" ng-click="goBack()"></i>
                <div class="col-xs-10">
                    <h4>{{ctrl.header}}</h4>
                </div>
            </div>
        </div>
    </div>

    <div ng-if="!isMobile" class="ad-page-content">

        <div class="ad-page-container-flex">

            <!-- UPPER START -->
            <div class="ad-flex-item-upper ng-class:[{'ad-flex-show-full': ctrl.isUpperMode(), 'ad-flex-show': ctrl.isBothMode(), 'ad-flex-hide': ctrl.isLowerMode()}]">

                <ad-embedded-file ng-if="ctrl.isUrlString(ctrl.upperUrl)" refresh="ctrl.blockMode" ng-attr-fileurl="ctrl.upperUrl" ng-attr-filename="ctrl.upperUrl"></ad-embedded-file>

                <div ng-if="ctrl.error" class="alert alert-danger" role="alert">{{ctrl.error}}</div>
            </div>
            <!-- UPPER END -->

            <!-- LOWER START -->
            <div class="ad-flex-item-lower ng-class:[{'ad-flex-show-full': ctrl.isLowerMode(), 'ad-flex-show': ctrl.isBothMode(), 'ad-flex-hide': ctrl.isUpperMode()}]">

                <ad-embedded-file ng-if="ctrl.showEmbeddedFile(ctrl.lowerUrl)" refresh="ctrl.blockMode" ng-attr-fileurl="ctrl.lowerUrl" ng-attr-filename="ctrl.lowerUrl"></ad-embedded-file>
                <db-proposals ng-if="ctrl.isProposalsActive()" guid="ctrl.topic.topicGuid"></db-proposals>

            </div>
            <!-- LOWER END -->

        </div>
    </div>

    <div ng-if="isMobile" class="ad-page-content">
        <div class="ad-page-container">
            <button type="button" ng-disabled="!ctrl.topicData" class="btn btn-info btn-lg btn-block wrap-button-text db-btn-default"
            ng-click="ctrl.topicClicked()" translate translate-cloak>STR_TOPIC</button>
            <button type="button" ng-disabled="!ctrl.attachmentData.objects.length" class="btn btn-info btn-lg btn-block wrap-button-text db-btn-default"
            ng-click="ctrl.attachmentClicked()"><span translate translate-cloak>STR_ATTACHMENTS</span> <span class="badge">{{ctrl.attachmentData.objects.length}}</span></button>
            <button type="button" ng-disabled="!ctrl.additionalMaterialData.objects.length" class="btn btn-info btn-lg btn-block wrap-button-text db-btn-default ng-class:[{'disabled': !ctrl.additionalMaterialData.objects.length}]"
            ng-click="ctrl.additionalMaterialClicked()"><span translate translate-cloak>STR_ADDITIONAL_MATERIAL</span> <span class="badge">{{ctrl.additionalMaterialData.objects.length}}</span></button>
            <button type="button" ng-disabled="!ctrl.decisionData.objects.length" class="btn btn-info btn-lg btn-block wrap-button-text db-btn-default"
            ng-click="ctrl.decisionClicked()"><span translate translate-cloak>STR_DECISION_HISTORY</span> <span class="badge">{{ctrl.decisionData.objects.length}}</span></button>
            <button type="button" class="btn btn-info btn-lg btn-block wrap-button-text db-btn-default" ng-click="ctrl.proposalsClicked()"
            translate translate-cloak>STR_PROPOSALS</button>
        </div>
    </div>

</div>

<ui-view ng-if="isMobile" name="childContent"></ui-view>
