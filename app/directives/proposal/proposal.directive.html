<div class="proposal db-directive db-padding-10" ng-click="(c.mode !== c.modes.EDIT) && c.toggleCollapse()">

    <div class="db-flex db-center-v">

        <span class="db-margin-10-right glyphicon glyph-fs-14 ng-class:{'glyphicon-minus': c.mode !== c.modes.COLLAPSED, 'glyphicon-plus': c.mode === c.modes.COLLAPSED}"
            aria-hidden="true"></span>

        <span ng-show="c.uiProposal.isPublishedIcon" class="db-margin-10-right glyphicon glyph-fs-14 glyphicon-send db-published"
            aria-hidden="true" tooltip-enable="c.isTooltips" uib-tooltip="{{'STR_PUBLISHED' | translate}}" tooltip-placement="right"></span>

        <span ng-show="c.uiProposal.isModified" class=" db-margin-10-right glyphicon glyph-fs-14 glyphicon-bell db-newprops" aria-hidden="true"
            tooltip-enable="c.isTooltips" uib-tooltip="{{'STR_INFO_NEW_PROPS' | translate}}" tooltip-placement="right"></span>

        <b class="db-margin-10-right">{{c.uiProposal.orderNumber}}</b><b class="db-margin-10-right">{{c.typeText(c.uiProposal.proposalType)}}</b>
        <b class="db-margin-10-right db-oneliner" ng-if="c.uiProposal.isPublished === c.status.YES">{{c.uiProposal.personName}}</b>
        <span class="db-flex-area db-oneliner" ng-bind-html="c.mode === c.modes.COLLAPSED ? c.uiProposal.text : null"></span>

    </div>

    <div class="db-flex">

        <div class="db-flex-area" uib-collapse="c.mode === c.modes.COLLAPSED">
            <pre class="db-margin-05-top db-transparent" ng-if="c.mode === c.modes.OPEN" ng-bind-html="c.uiProposal.text | unsafe"></pre>
            <pre id="editor" class="db-margin-05-top" ng-if="c.mode === c.modes.EDIT" contenteditable="true" ng-model="c.editedText"></pre>

            <div ng-if="c.mode !== c.modes.COLLAPSED" class="db-flex-right db-flex-area">
                <button ng-if="c.uiProposal.isOwnProposal && (c.mode !== c.modes.EDIT)" class="btn btn-danger db-btn-big db-margin-2" db-confirm
                    confirm-config="c.deleteConfig" ng-click="c.remove()"><span translate translate-cloak>STR_DELETE</span></button>
                <button ng-if="c.uiProposal.isOwnProposal && !c.uiProposal.isPublished && (c.mode !== c.modes.EDIT)" class="btn btn-success db-btn-big db-margin-2"
                    db-confirm confirm-config="c.publishConfig" ng-click="c.send()"><span translate translate-cloak>STR_PUBLISH</span></button>
                <button ng-if="c.uiProposal.isOwnProposal && !c.uiProposal.isPublished && (c.mode !== c.modes.EDIT)" class="btn btn-primary db-btn-big db-margin-2"
                    ng-click="c.edit()"><span translate translate-cloak>STR_EDIT</span></button>
                <button ng-if="c.uiProposal.isOwnProposal && (c.mode === c.modes.EDIT)" class="btn btn-primary db-btn-big db-margin-2" ng-click="c.cancel()"><span translate translate-cloak>STR_CANCEL</span></button>
                <button ng-if="c.uiProposal.isOwnProposal && (c.mode === c.modes.EDIT)" class="btn btn-success db-btn-big db-margin-2" ng-click="c.accept()"><span translate translate-cloak>STR_SAVE</span></button>
            </div>

        </div>

    </div>
</div>
